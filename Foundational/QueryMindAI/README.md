# QueryMind AI

A modern AI-powered chat application with Retrieval-Augmented Generation (RAG) capabilities, built with React, TypeScript, Express, and MongoDB. QueryMind AI provides intelligent conversations enhanced with knowledge base retrieval for more accurate and contextual responses.

## ğŸš€ Features

- **AI Chat Interface**: Modern, responsive chat UI with real-time messaging
- **RAG Integration**: Retrieval-Augmented Generation for context-aware responses
- **Analytics Dashboard**: Conversation metrics and insights
- **Dark/Light Theme**: Toggle between themes for better user experience
- **MongoDB Integration**: Vector similarity search for knowledge retrieval
- **Azure OpenAI Support**: Integration with Azure OpenAI services
- **Ollama Support**: Local embedding generation for RAG functionality
- **Real-time Typing Indicators**: Visual feedback during AI processing
- **Source Attribution**: Transparent AI responses with source references

## ğŸ—ï¸ Architecture

```
QueryMind AI/
â”œâ”€â”€ client/                 # React frontend
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # UI components
â”‚   â”‚   â”œâ”€â”€ pages/         # Page components
â”‚   â”‚   â”œâ”€â”€ hooks/         # Custom React hooks
â”‚   â”‚   â””â”€â”€ lib/           # Utilities and services
â”œâ”€â”€ server/                # Express backend
â”‚   â”œâ”€â”€ routes.ts          # API routes
â”‚   â”œâ”€â”€ langchain.ts       # AI/LLM integration
â”‚   â”œâ”€â”€ rag.ts            # RAG implementation
â”‚   â”œâ”€â”€ mongodb.ts        # Database operations
â”‚   â””â”€â”€ embeddings.ts     # Vector embeddings
â”œâ”€â”€ shared/               # Shared schemas and types
â””â”€â”€ dist/                # Built application
```

## ğŸ“‹ Prerequisites

Before running the application, ensure you have:

- **Node.js** (v18 or higher)
- **npm** or **yarn**
- **MongoDB** (Atlas or local instance)
- **Ollama** (for local embedding generation)
- **Azure OpenAI** account (optional, for cloud AI)

## ğŸ› ï¸ Installation

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd QueryMindAI
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Set up environment variables**
   ```bash
   cp env-template.txt .env
   ```

4. **Configure your environment**
   Edit the `.env` file with your specific configuration:

   ```env
   # Server Configuration
   PORT=5000
   NODE_ENV=development

   # Azure OpenAI (Required for chat functionality)
   AZURE_OPENAI_API_KEY=your_azure_openai_api_key_here
   AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
   AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4o-mini
   AZURE_OPENAI_MODEL_NAME=gpt-4o-mini
   AZURE_OPENAI_API_VERSION=2024-07-18

   # MongoDB Configuration
   MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/
   MONGODB_DATABASE=query-mind
   MONGODB_COLLECTION=knowledge-base

   # Ollama Configuration (for embedding generation)
   OLLAMA_BASE_URL=http://localhost:11434

   # PostgreSQL (for Drizzle ORM)
   DATABASE_URL=postgresql://username:password@localhost:5432/querymind_db
   ```

## ğŸš€ Running the Application

### Development Mode

1. **Start Ollama** (if using local embedding generation)
   ```bash
   ollama serve
   ```

2. **Pull required embedding model**
   ```bash
   ollama pull embeddinggemma
   ```

3. **Run the development server**
   ```bash
   npm run dev
   ```

   The application will be available at `http://localhost:5000`

### Production Mode

1. **Build the application**
   ```bash
   npm run build
   ```

2. **Start the production server**
   ```bash
   npm start
   ```

## ğŸ—„ï¸ Database Setup

### MongoDB Setup

1. **Create a MongoDB Atlas cluster** or use a local MongoDB instance
2. **Create a collection** with documents containing:
   - `content`: Text content for knowledge base
   - `embedding`: Vector embeddings (generated by the system)
   - `metadata`: Optional metadata fields

3. **Update your MongoDB URI** in the `.env` file

### PostgreSQL Setup (Optional)

If using Drizzle ORM features:

1. **Set up PostgreSQL database**
2. **Update DATABASE_URL** in `.env`
3. **Run database migrations**
   ```bash
   npm run db:push
   ```

## ğŸ§ª Testing

### Test RAG Functionality

Run the RAG test script to verify your setup:

```bash
npx tsx server/test-rag.ts
```

### Health Check

Visit `http://localhost:5000/api/health` to check:
- Server status
- RAG system status
- Database connections
- Document count

## ğŸ“¡ API Endpoints

### Chat
- `POST /api/chat` - Send messages to AI with RAG enhancement

### RAG Operations
- `GET /api/rag/search?query=<query>&limit=<number>` - Search knowledge base
- `GET /api/rag/status` - Check RAG system status

### System
- `GET /api/health` - Health check with system status

## ğŸ¨ UI Components

The application uses a modern component library with:

- **Chat Interface**: Message bubbles, typing indicators, input area
- **Analytics Dashboard**: Metrics cards, charts, data tables
- **Theme System**: Dark/light mode toggle
- **Responsive Design**: Mobile-friendly layout

## ğŸ”§ Configuration Options

### Environment Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `PORT` | Server port | 5000 |
| `NODE_ENV` | Environment mode | development |
| `AZURE_OPENAI_API_KEY` | Azure OpenAI API key | Required |
| `AZURE_OPENAI_ENDPOINT` | Azure OpenAI endpoint | Required |
| `MONGODB_URI` | MongoDB connection string | Required |
| `OLLAMA_BASE_URL` | Ollama server URL | http://localhost:11434 |
| `AZURE_OPENAI_TEMPERATURE` | AI response creativity | 0.5 |
| `AZURE_OPENAI_MAX_TOKENS` | Max response length | 500 |

### RAG Configuration

- **Similarity Threshold**: Adjust in `server/rag.ts`
- **Context Length**: Modify in `server/langchain.ts`
- **Embedding Model**: Configure in `server/embeddings.ts`

## ğŸ› Troubleshooting

### Common Issues

1. **"Ollama connection failed"**
   - Ensure Ollama is running: `ollama serve`
   - Check `OLLAMA_BASE_URL` in `.env`

2. **"MongoDB connection failed"**
   - Verify MongoDB URI in `.env`
   - Check network connectivity to MongoDB Atlas

3. **"Azure OpenAI API error"**
   - Verify API key and endpoint
   - Check deployment name and model availability

4. **"Build errors"**
   - Clear node_modules: `rm -rf node_modules && npm install`
   - Check TypeScript configuration

### Debug Mode

Enable debug logging:
```env
LOG_LEVEL=debug
```

## ğŸ“š Documentation

- [RAG Implementation Guide](./RAG_IMPLEMENTATION.md)
- [Design Guidelines](./design_guidelines.md)
- [API Documentation](./docs/api.md) (if available)

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests if applicable
5. Submit a pull request

## ğŸ“„ License

This project is licensed under the MIT License - see the LICENSE file for details.

## ğŸ†˜ Support

For support and questions:
- Check the troubleshooting section
- Review the documentation
- Open an issue on GitHub

## ğŸ”„ Updates

To update the application:

1. Pull latest changes: `git pull`
2. Update dependencies: `npm install`
3. Rebuild if needed: `npm run build`
4. Restart the server: `npm run dev` or `npm start`

---

**QueryMind AI** - Intelligent conversations powered by RAG technology.
